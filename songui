local HttpService = game:GetService("HttpService")
local SoundService = game:GetService("SoundService")

local playlistFile = "song_playlist.json"
local songs = {}

pcall(function()
    if isfile(playlistFile) then
        songs = HttpService:JSONDecode(readfile(playlistFile))
    end
end)

local function savePlaylist()
    writefile(playlistFile, HttpService:JSONEncode(songs))
end

local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "SongPlayer"

local frame = Instance.new("Frame", ScreenGui)
frame.Size = UDim2.new(0, 300, 0, 350)
frame.Position = UDim2.new(0.5, -150, 0.5, -175)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0

local UIListLayout = Instance.new("UIListLayout", frame)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 5)

local title = Instance.new("TextLabel", frame)
title.Text = "Song Player"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.SourceSansBold
title.TextScaled = true

local inputBox = Instance.new("TextBox", frame)
inputBox.PlaceholderText = "Enter Song ID"
inputBox.Size = UDim2.new(1, 0, 0, 30)
inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
inputBox.TextColor3 = Color3.new(1, 1, 1)
inputBox.Font = Enum.Font.SourceSans
inputBox.TextScaled = true

local addButton = Instance.new("TextButton", frame)
addButton.Text = "Add to Playlist"
addButton.Size = UDim2.new(1, 0, 0, 30)
addButton.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
addButton.TextColor3 = Color3.new(1, 1, 1)
addButton.Font = Enum.Font.SourceSansBold
addButton.TextScaled = true

local scrollFrame = Instance.new("ScrollingFrame", frame)
scrollFrame.Size = UDim2.new(1, 0, 1, -120)
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
scrollFrame.ScrollBarThickness = 5
scrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

local listLayout = Instance.new("UIListLayout", scrollFrame)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 5)

local sound = Instance.new("Sound", SoundService)
sound.Volume = 1
sound.Looped = false

local function playSong(id)
    sound.SoundId = "rbxassetid://" .. tostring(id)
    sound:Play()
end

local function refreshList()
    scrollFrame:ClearAllChildren()
    listLayout.Parent = scrollFrame

    for _, id in pairs(songs) do
        local songBtn = Instance.new("TextButton", scrollFrame)
        songBtn.Size = UDim2.new(1, -10, 0, 30)
        songBtn.Text = "Play: " .. id
        songBtn.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
        songBtn.TextColor3 = Color3.new(1, 1, 1)
        songBtn.Font = Enum.Font.SourceSans
        songBtn.TextScaled = true

        songBtn.MouseButton1Click:Connect(function()
            playSong(id)
        end)
    end
end

addButton.MouseButton1Click:Connect(function()
    local input = tonumber(inputBox.Text)
    if input then
        table.insert(songs, input)
        savePlaylist()
        refreshList()
        inputBox.Text = ""
    end
end)

refreshList()
